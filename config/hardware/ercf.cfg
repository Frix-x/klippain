## Enraged Rabbit : Carrot Feeder V1.1 hardware config file
## Software used Ercf Software V3 "Happy Hare" (HH) by moggieuk
[gcode_macro _USER_VARIABLES]
variable_ercf_enabled: True
gcode:

[extruder]
max_extrude_only_distance: 200
max_extrude_cross_section: 50.0

# Specific macro to raise an error during the print_start and stop in case of ERCF error
[gcode_macro _ERCF_ERROR_CHECK]
gcode:
    {% set verbose = printer["gcode_macro _USER_VARIABLES"].verbose %}
    {% set INITIAL_TOOL = printer["gcode_macro START_PRINT"].initial_tool %}

    {% if printer.ercf.enabled|int == 1 %}
        {% if printer.ercf.tool|int != INITIAL_TOOL or printer.ercf.filament != "Loaded" %}
            {action_raise_error("ERROR in loading filament from ERCF !!! Check and restart the print.")}
        {% else %}
            {% if verbose %}
                RESPOND MSG="T{INITIAL_TOOL} ready"
            {% endif %}
        {% endif %}
    {% endif %}
