[gcode_macro LIGHT_OFF]
gcode:
    {% set light_pin_name = printer["gcode_macro _USER_VARIABLES"].light_pin_name %}

    SET_LED LED={light_pin_name} RED=0 GREEN=0 BLUE=0 WHITE=0


[gcode_macro LIGHT_ON]
gcode:
    {% set S = params.S|default(100)|float / 100 %}
    {% set light_pin_name = printer["gcode_macro _USER_VARIABLES"].light_pin_name %}
    {% set R,G,B,W = printer["gcode_macro _USER_VARIABLES"].max_rgbw|default([1,1,1,1]) %}

    SET_LED LED={light_pin_name} RED={R*S} GREEN={G*S} BLUE={B*S} WHITE={W*S}
