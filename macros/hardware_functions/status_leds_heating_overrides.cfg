[gcode_macro M109]
rename_existing: _BASE_M109
description: Heat extruder and set status led accordingly
gcode:
    {% set status_leds_enabled = printer["gcode_macro _USER_VARIABLES"].status_leds_enabled %}
    
    {% if status_leds_enabled %}
        STATUS_LEDS COLOR="HEATING"
    {% endif %}

    _BASE_M109 {rawparams}

    {% if status_leds_enabled %}
        STATUS_LEDS COLOR="READY"
    {% endif %}
